{% extends "base.html" %}

{% block title %}AI Post Generator - HypeItUp{% endblock %}

{% block extra_css %}
<style>
    .generator-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2rem;
        max-width: 800px;
        margin: 0 auto;
    }

    .input-card {
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: 20px;
        padding: 2.5rem;
    }

    .result-card {
        background: var(--bg-input);
        border: 1px solid var(--border-bright);
        border-radius: 16px;
        padding: 2rem;
        margin-top: 2rem;
        position: relative;
        animation: slideIn 0.4s ease;
    }

    .preview-badge {
        position: absolute;
        top: -12px;
        right: 20px;
        background: var(--accent);
        color: var(--bg-dark);
        font-weight: 700;
        font-size: 0.75rem;
        padding: 4px 12px;
        border-radius: 20px;
        text-transform: uppercase;
    }

    .markdown-content {
        color: var(--text-secondary);
        line-height: 1.7;
    }
    
    .markdown-content h1, .markdown-content h2 { margin-bottom: 1rem; color: var(--text-primary); }
    .markdown-content ul { padding-left: 1.5rem; margin-bottom: 1rem; }
    .markdown-content p { margin-bottom: 1rem; }

    /* Loading Overlay */
    .loading-overlay {
        display: none;
        text-align: center;
        margin-top: 1rem;
    }
    .loading-overlay.active { display: block; }
</style>
{% endblock %}

{% block content %}
<div class="generator-container">
    
    <div style="text-align: center; margin-bottom: 1rem;">
        <h1 style="background: linear-gradient(to right, #a78bfa, #f472b6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            Generate Campaign Post
        </h1>
        <p style="color: var(--text-muted);">Turn a simple idea into a viral caption in seconds.</p>
    </div>

    <div class="input-card">
        <form method="POST" onsubmit="document.getElementById('loader').classList.add('active');">
            <div class="form-group">
                <label class="form-label">Select Platform</label>
                <select name="platform" class="form-input">
                    <option value="LinkedIn">LinkedIn (Professional)</option>
                    <option value="Twitter">Twitter / X (Short & Punchy)</option>
                    <option value="Instagram">Instagram (Visual & Hashtags)</option>
                    <option value="Reddit">Reddit (Engaging & Authentic)</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Describe Your Campaign</label>
                <textarea name="content" class="form-input" rows="5" placeholder="e.g., Launching a new eco-friendly sneaker line made from recycled ocean plastic..."></textarea>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem;">
                <span>âœ¨</span> Generate AI Post
            </button>

            <div id="loader" class="loading-overlay">
                <div class="spinner" style="margin: 0 auto 10px;"></div>
                <p style="color: var(--text-muted); font-size: 0.9rem;">Cooking up something viral...</p>
            </div>
        </form>
    </div>

    {% if ai_generated %}
    <div class="result-card">
        <span class="preview-badge">AI Preview</span>
        <div class="markdown-content">
            {{ ai_generated | safe }}
        </div>
        
        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-subtle); display: flex; justify-content: flex-end; gap: 1rem;">
            <button onclick="navigator.clipboard.writeText(`{{ raw_ai }}`)" class="btn btn-secondary" style="font-size: 0.85rem;">
                ðŸ“‹ Copy Text
            </button>
        </div>
    </div>
    {% endif %}

</div>
{% endblock %}